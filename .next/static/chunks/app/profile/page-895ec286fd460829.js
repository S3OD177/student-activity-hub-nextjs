(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{407:function(e,s,t){Promise.resolve().then(t.bind(t,112))},112:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var a=t(7437),l=t(605),i=t(9376),r=t(2265),n=t(2869),d=t(6070),c=t(5186),o=t(6815),u=t(7992),x=t(8893),h=t(3229),m=t(2489),p=t(598),j=t(5135),f=t(2351),g=t(3327),b=t(1047),v=t(2369),N=t(7404),y=t(484),w=t(3284);function k(){var e,s,t,k;let{data:I,status:S}=(0,l.useSession)(),_=(0,i.useRouter)(),{toast:T}=(0,u.pm)(),[C,O]=(0,r.useState)(!0),[A,E]=(0,r.useState)(!1),[Z,Y]=(0,r.useState)(null),[P,R]=(0,r.useState)({fullName:"",phoneNumber:"",bio:"",linkedIn:"",github:"",twitter:"",skills:"",gpa:"",graduationYear:"",studentId:""});(0,r.useEffect)(()=>{"unauthenticated"===S?_.push("/login"):I&&D()},[S,I,_]);let D=async()=>{try{let e=await fetch("/api/profile"),s=await e.json();Y(s),R({fullName:s.fullName||"",phoneNumber:s.phoneNumber||"",bio:s.bio||"",linkedIn:s.linkedIn||"",github:s.github||"",twitter:s.twitter||"",skills:s.skills||"",gpa:s.gpa||"",graduationYear:s.graduationYear||"",studentId:s.studentId||""})}catch(e){console.error("Error fetching profile:",e)}finally{O(!1)}},F=async()=>{try{(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok&&(T({title:"Profile updated successfully!"}),E(!1),D())}catch(e){T({title:"Error",description:"Failed to update profile",variant:"destructive"})}};return"loading"===S||C?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 dark:from-gray-900 dark:to-purple-900 flex flex-col",children:[(0,a.jsx)(y.w,{}),(0,a.jsx)("main",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),(0,a.jsx)(w.$,{})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col",children:[(0,a.jsx)(y.w,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Profile"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and preferences"})]}),A?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.z,{onClick:F,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:()=>E(!1),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,a.jsxs)(n.z,{onClick:()=>E(!0),children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{children:"Basic Information"}),(0,a.jsx)(d.SZ,{children:"Your personal details"})]}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"fullName",children:"Full Name"}),(0,a.jsx)(c.I,{id:"fullName",value:P.fullName,onChange:e=>R({...P,fullName:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(c.I,{id:"email",value:(null==Z?void 0:Z.email)||"",disabled:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(c.I,{id:"phone",value:P.phoneNumber,onChange:e=>R({...P,phoneNumber:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"studentId",children:"Student ID"}),(0,a.jsx)(c.I,{id:"studentId",value:P.studentId,onChange:e=>R({...P,studentId:e.target.value}),disabled:!A})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"bio",children:"Bio"}),(0,a.jsx)("textarea",{id:"bio",className:"w-full min-h-[100px] rounded-md border border-input bg-background px-3 py-2 text-sm",value:P.bio,onChange:e=>R({...P,bio:e.target.value}),disabled:!A,placeholder:"Tell us about yourself..."})]})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Academic Information"})}),(0,a.jsx)(d.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"gpa",children:"GPA"}),(0,a.jsx)(c.I,{id:"gpa",type:"number",step:"0.01",value:P.gpa,onChange:e=>R({...P,gpa:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"gradYear",children:"Graduation Year"}),(0,a.jsx)(c.I,{id:"gradYear",type:"number",value:P.graduationYear,onChange:e=>R({...P,graduationYear:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{htmlFor:"skills",children:"Skills (comma-separated)"}),(0,a.jsx)(c.I,{id:"skills",value:P.skills,onChange:e=>R({...P,skills:e.target.value}),disabled:!A,placeholder:"React, Python, Design..."})]})]})})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Social Links"})}),(0,a.jsx)(d.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)(c.I,{placeholder:"LinkedIn profile URL",value:P.linkedIn,onChange:e=>R({...P,linkedIn:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),(0,a.jsx)(c.I,{placeholder:"GitHub username",value:P.github,onChange:e=>R({...P,github:e.target.value}),disabled:!A})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-blue-400"}),(0,a.jsx)(c.I,{placeholder:"Twitter handle",value:P.twitter,onChange:e=>R({...P,twitter:e.target.value}),disabled:!A})]})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Statistics"})}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Points"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-purple-600",children:(null==Z?void 0:Z.totalPoints)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Activities"}),(0,a.jsx)("span",{className:"text-xl font-semibold",children:(null==Z?void 0:null===(e=Z._count)||void 0===e?void 0:e.enrollments)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Attendance Rate"}),(0,a.jsxs)("span",{className:"text-xl font-semibold",children:[(null==Z?void 0:Z.attendanceRate)||0,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reviews"}),(0,a.jsx)("span",{className:"text-xl font-semibold",children:(null==Z?void 0:null===(s=Z._count)||void 0===s?void 0:s.reviews)||0})]})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-yellow-500"}),"Badges (",(null==Z?void 0:null===(t=Z.badges)||void 0===t?void 0:t.length)||0,")"]})}),(0,a.jsx)(d.aY,{children:(null==Z?void 0:null===(k=Z.badges)||void 0===k?void 0:k.length)>0?(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Z.badges.map(e=>(0,a.jsxs)("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,a.jsx)("div",{className:"text-3xl mb-1",children:e.badge.icon}),(0,a.jsx)("div",{className:"text-xs font-semibold",children:e.badge.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.badge.points," pts"]})]},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No badges earned yet"})})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Quick Actions"})}),(0,a.jsxs)(d.aY,{className:"space-y-2",children:[(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>_.push("/history"),children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Activity History"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>_.push("/settings"),children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Settings"]}),(0,a.jsxs)(n.z,{variant:"outline",className:"w-full justify-start",onClick:()=>_.push("/qr"),children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"My QR Code"]})]})]})]})]})]}),(0,a.jsx)(w.$,{})]})}},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return r}});var a=t(7437),l=t(2265),i=t(4508);let r=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});r.displayName="Input"},6815:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(7437),l=t(2265),i=t(6394),r=t(535),n=t(4508);let d=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.f,{ref:s,className:(0,n.cn)(d(),t),...l})});c.displayName=i.f.displayName},7992:function(e,s,t){"use strict";t.d(s,{pm:function(){return x}});var a=t(2265);let l=0,i=new Map,r=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[585,972,605,671,701,971,117,744],function(){return e(e.s=407)}),_N_E=e.O()}]);